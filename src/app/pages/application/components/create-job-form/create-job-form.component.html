<div class="create-job-form-container">
  <div class="bg-gray-800/50 rounded-xl p-8 shadow-xl backdrop-blur-sm">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-3xl font-semibold text-indigo-300">Crear Nueva Oferta de Trabajo</h2>
      <button type="button"
              (click)="cancel()"
              class="p-3 bg-red-600/20 hover:bg-red-600/40 text-red-400 hover:text-red-300 rounded-lg transition-all duration-200 hover:scale-110 border border-red-500/30 hover:border-red-400/50 cursor-pointer">
        <span class="text-lg">✖️</span>
      </button>


    </div>

    <!-- Error Message -->
    <div *ngIf="submitError" class="bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded mb-6">
      {{ submitError }}
    </div>

    <form [formGroup]="jobForm" (ngSubmit)="onSubmit()" class="space-y-8">
      <!-- Información de la Oferta -->
      <div class="form-section">
        <h3 class="text-xl font-semibold text-white mb-4">Información de la Oferta</h3>
        <div class="form-grid">

          <!-- Título -->
          <div class="md:col-span-2">
            <label for="titulo" class="block text-sm font-medium text-gray-300 mb-2">
              Título de la Oferta *
            </label>
            <input type="text"
                   id="titulo"
                   formControlName="titulo"
                   class="form-field-input"
                   placeholder="Ej: Desarrollador Frontend Senior">
            <div *ngIf="jobForm.get('titulo')?.invalid && jobForm.get('titulo')?.touched" class="error-message">
              <div *ngIf="jobForm.get('titulo')?.errors?.['required']">El título es requerido</div>
              <div *ngIf="jobForm.get('titulo')?.errors?.['minlength']">El título debe tener al menos 5 caracteres</div>
            </div>
          </div>

          <!-- Descripción -->
          <div class="md:col-span-2">
            <label for="descripcion" class="block text-sm font-medium text-gray-300 mb-2">
              Descripción *
            </label>
            <textarea id="descripcion"
                      formControlName="descripcion"
                      rows="4"
                      class="form-field-textarea"
                      placeholder="Describe detalladamente los requerimientos, responsabilidades y beneficios del puesto...">
            </textarea>
            <div *ngIf="jobForm.get('descripcion')?.invalid && jobForm.get('descripcion')?.touched" class="error-message">
              <div *ngIf="jobForm.get('descripcion')?.errors?.['required']">La descripción es requerida</div>
              <div *ngIf="jobForm.get('descripcion')?.errors?.['minlength']">La descripción debe tener al menos 20 caracteres</div>
            </div>
          </div>

          <!-- Estado, Área -->
          <div>
            <label for="estado" class="block text-sm font-medium text-gray-300 mb-2">
              Estado *
            </label>
            <select id="estado"
                    formControlName="estado"
                    class="form-field-select">
              <option *ngFor="let estado of estados" [value]="estado">{{ estado }}</option>
            </select>
            <div *ngIf="jobForm.get('estado')?.invalid && jobForm.get('estado')?.touched" class="error-message">
              El estado es requerido
            </div>
          </div>

          <div>
            <label for="area" class="block text-sm font-medium text-gray-300 mb-2">
              Área *
            </label>
            <input type="text"
                   id="area"
                   formControlName="area"
                   class="form-field-input"
                   placeholder="Ej: Tecnología, Marketing">
            <div *ngIf="jobForm.get('area')?.invalid && jobForm.get('area')?.touched" class="error-message">
              El área es requerida
            </div>
          </div>

          <!-- Ubicación -->
          <div>
            <label for="localizacion" class="block text-sm font-medium text-gray-300 mb-2">
              Ciudad/Localización *
            </label>
            <input type="text"
                   id="localizacion"
                   formControlName="localizacion"
                   class="form-field-input"
                   placeholder="Ej: Buenos Aires, Bogotá">
            <div *ngIf="jobForm.get('localizacion')?.invalid && jobForm.get('localizacion')?.touched" class="error-message">
              La localización es requerida
            </div>
          </div>

          <div>
            <label for="pais" class="block text-sm font-medium text-gray-300 mb-2">
              País *
            </label>
            <select id="pais"
                    formControlName="pais"
                    class="form-field-select">
              <option *ngFor="let pais of paises" [value]="pais">{{ pais }}</option>
            </select>
            <div *ngIf="jobForm.get('pais')?.invalid && jobForm.get('pais')?.touched" class="error-message">
              El país es requerido
            </div>
          </div>

          <!-- Idioma -->
          <div>
            <label for="idioma" class="block text-sm font-medium text-gray-300 mb-2">
              Idioma *
            </label>
            <select id="idioma"
                    formControlName="idioma"
                    class="form-field-select">
              <option *ngFor="let idioma of idiomas" [value]="idioma">{{ idioma }}</option>
            </select>
            <div *ngIf="jobForm.get('idioma')?.invalid && jobForm.get('idioma')?.touched" class="error-message">
              El idioma es requerido
            </div>
          </div>

          <!-- Requisitos mínimos -->
          <div class="md:col-span-2">
            <label for="requisitos_minimos" class="block text-sm font-medium text-gray-300 mb-2">
              Requisitos Mínimos *
            </label>
            <textarea id="requisitos_minimos"
                      formControlName="requisitos_minimos"
                      rows="3"
                      class="form-field-textarea"
                      placeholder="Describe los requisitos mínimos, experiencia, conocimientos técnicos...">
            </textarea>
            <div *ngIf="jobForm.get('requisitos_minimos')?.invalid && jobForm.get('requisitos_minimos')?.touched" class="error-message">
              <div *ngIf="jobForm.get('requisitos_minimos')?.errors?.['required']">Los requisitos son requeridos</div>
              <div *ngIf="jobForm.get('requisitos_minimos')?.errors?.['minlength']">Los requisitos deben tener al menos 10 caracteres</div>
            </div>
          </div>

          <!-- Salario -->
          <div>
            <label for="salario_desde" class="block text-sm font-medium text-gray-300 mb-2">
              Salario Desde *
            </label>
            <input type="number"
                   id="salario_desde"
                   formControlName="salario_desde"
                   (blur)="validateSalarioHasta()"
                   class="form-field-input"
                   placeholder="0">
            <div *ngIf="jobForm.get('salario_desde')?.invalid && jobForm.get('salario_desde')?.touched" class="error-message">
              El salario desde es requerido y debe ser mayor o igual a 0
            </div>
          </div>

          <div>
            <label for="salario_hasta" class="block text-sm font-medium text-gray-300 mb-2">
              Salario Hasta *
            </label>
            <input type="number"
                   id="salario_hasta"
                   formControlName="salario_hasta"
                   (blur)="validateSalarioHasta()"
                   class="form-field-input"
                   placeholder="0">
            <div *ngIf="jobForm.get('salario_hasta')?.invalid && jobForm.get('salario_hasta')?.touched" class="error-message">
              <div *ngIf="jobForm.get('salario_hasta')?.errors?.['required']">El salario hasta es requerido</div>
              <div *ngIf="jobForm.get('salario_hasta')?.errors?.['min']">El salario hasta debe ser mayor o igual a 0</div>
              <div *ngIf="jobForm.get('salario_hasta')?.errors?.['invalidRange']">El salario hasta debe ser mayor al salario desde</div>
            </div>
          </div>

          <div>
            <label for="salario_modalidad" class="block text-sm font-medium text-gray-300 mb-2">
              Modalidad Salario *
            </label>
            <select id="salario_modalidad"
                    formControlName="salario_modalidad"
                    class="form-field-select">
              <option *ngFor="let modalidad of modalidadesSalario" [value]="modalidad">{{ modalidad }}</option>
            </select>
            <div *ngIf="jobForm.get('salario_modalidad')?.invalid && jobForm.get('salario_modalidad')?.touched" class="error-message">
              La modalidad de salario es requerida
            </div>
          </div>

          <div>
            <label for="salario_moneda" class="block text-sm font-medium text-gray-300 mb-2">
              Moneda *
            </label>
            <select id="salario_moneda"
                    formControlName="salario_moneda"
                    class="form-field-select">
              <option *ngFor="let moneda of monedas" [value]="moneda">{{ moneda }}</option>
            </select>
            <div *ngIf="jobForm.get('salario_moneda')?.invalid && jobForm.get('salario_moneda')?.touched" class="error-message">
              La moneda es requerida
            </div>
          </div>

          <!-- Solicitud ID -->
          <div>
            <label for="solicitud_id" class="block text-sm font-medium text-gray-300 mb-2">
              ID de Solicitud *
            </label>
            <input type="number"
                   id="solicitud_id"
                   formControlName="solicitud_id"
                   class="form-field-input"
                   placeholder="1000">
            <div *ngIf="jobForm.get('solicitud_id')?.invalid && jobForm.get('solicitud_id')?.touched" class="error-message">
              El ID de solicitud es requerido y debe ser mayor o igual a 1000
            </div>
          </div>

          <div>
            <label for="salario_mostrar" class="block text-sm font-medium text-gray-300 mb-2">
              Mostrar Salario *
            </label>
            <select id="salario_mostrar"
                    formControlName="salario_mostrar"
                    class="form-field-select">
              <option value="1">Sí</option>
              <option value="0">No</option>
            </select>
            <div *ngIf="jobForm.get('salario_mostrar')?.invalid && jobForm.get('salario_mostrar')?.touched" class="error-message">
              Debe seleccionar si mostrar o no el salario
            </div>
          </div>
        </div>
      </div>

      <!-- Información de la Especificación -->
      <div class="form-section">
        <h3 class="text-xl font-semibold text-white mb-4">Especificaciones del Puesto</h3>
        <div class="form-grid">

          <!-- Vacantes y Personal a cargo -->
          <div>
            <label for="numero_vacantes" class="block text-sm font-medium text-gray-300 mb-2">
              Número de Vacantes *
            </label>
            <input type="number"
                   id="numero_vacantes"
                   formControlName="numero_vacantes"
                   class="form-field-input"
                   placeholder="1">
            <div *ngIf="jobForm.get('numero_vacantes')?.invalid && jobForm.get('numero_vacantes')?.touched" class="error-message">
              El número de vacantes es requerido y debe ser mayor a 0
            </div>
          </div>

          <div>
            <label for="personal_a_cargo" class="block text-sm font-medium text-gray-300 mb-2">
              Personal a Cargo *
            </label>
            <input type="number"
                   id="personal_a_cargo"
                   formControlName="personal_a_cargo"
                   class="form-field-input"
                   placeholder="0">
            <div *ngIf="jobForm.get('personal_a_cargo')?.invalid && jobForm.get('personal_a_cargo')?.touched" class="error-message">
              El personal a cargo es requerido
            </div>
          </div>

          <!-- Tipo contrato y Modalidad trabajo -->
          <div>
            <label for="tipo_contrato" class="block text-sm font-medium text-gray-300 mb-2">
              Tipo de Contrato *
            </label>
            <select id="tipo_contrato"
                    formControlName="tipo_contrato"
                    class="form-field-select">
              <option *ngFor="let tipo of tiposContrato" [value]="tipo">{{ tipo }}</option>
            </select>
            <div *ngIf="jobForm.get('tipo_contrato')?.invalid && jobForm.get('tipo_contrato')?.touched" class="error-message">
              El tipo de contrato es requerido
            </div>
          </div>

          <div>
            <label for="modalidad_trabajo" class="block text-sm font-medium text-gray-300 mb-2">
              Modalidad de Trabajo *
            </label>
            <select id="modalidad_trabajo"
                    formControlName="modalidad_trabajo"
                    class="form-field-select">
              <option *ngFor="let modalidad of modalidadesTrabajo" [value]="modalidad">{{ modalidad }}</option>
            </select>
            <div *ngIf="jobForm.get('modalidad_trabajo')?.invalid && jobForm.get('modalidad_trabajo')?.touched" class="error-message">
              La modalidad de trabajo es requerida
            </div>
          </div>

          <!-- Categoría y Subcategoría -->
          <div>
            <label for="categoria" class="block text-sm font-medium text-gray-300 mb-2">
              Categoría *
            </label>
            <select id="categoria"
                    formControlName="categoria"
                    class="form-field-select">
              <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
            </select>
            <div *ngIf="jobForm.get('categoria')?.invalid && jobForm.get('categoria')?.touched" class="error-message">
              La categoría es requerida
            </div>
          </div>

          <div>
            <label for="subcategoria" class="block text-sm font-medium text-gray-300 mb-2">
              Subcategoría *
            </label>
            <input type="text"
                   id="subcategoria"
                   formControlName="subcategoria"
                   class="form-field-input"
                   placeholder="Ej: Frontend, Backend, UX/UI">
            <div *ngIf="jobForm.get('subcategoria')?.invalid && jobForm.get('subcategoria')?.touched" class="error-message">
              La subcategoría es requerida
            </div>
          </div>

          <!-- Sector y Nivel Profesional -->
          <div>
            <label for="sector" class="block text-sm font-medium text-gray-300 mb-2">
              Sector *
            </label>
            <select id="sector"
                    formControlName="sector"
                    class="form-field-select">
              <option *ngFor="let sec of sectores" [value]="sec">{{ sec }}</option>
            </select>
            <div *ngIf="jobForm.get('sector')?.invalid && jobForm.get('sector')?.touched" class="error-message">
              El sector es requerido
            </div>
          </div>

          <div>
            <label for="nivel_profesional" class="block text-sm font-medium text-gray-300 mb-2">
              Nivel Profesional *
            </label>
            <select id="nivel_profesional"
                    formControlName="nivel_profesional"
                    class="form-field-select">
              <option *ngFor="let nivel of nivelesProfesionales" [value]="nivel">{{ nivel }}</option>
            </select>
            <div *ngIf="jobForm.get('nivel_profesional')?.invalid && jobForm.get('nivel_profesional')?.touched" class="error-message">
              El nivel profesional es requerido
            </div>
          </div>

          <!-- Departamento y Experiencia -->
          <div>
            <label for="departamento" class="block text-sm font-medium text-gray-300 mb-2">
              Departamento *
            </label>
            <select id="departamento"
                    formControlName="departamento"
                    class="form-field-select">
              <option *ngFor="let depto of departamentos" [value]="depto">{{ depto }}</option>
            </select>
            <div *ngIf="jobForm.get('departamento')?.invalid && jobForm.get('departamento')?.touched" class="error-message">
              El departamento es requerido
            </div>
          </div>

          <div>
            <label for="experiencia_minima" class="block text-sm font-medium text-gray-300 mb-2">
              Experiencia Mínima *
            </label>
            <input type="text"
                   id="experiencia_minima"
                   formControlName="experiencia_minima"
                   class="form-field-input"
                   placeholder="Ej: 2+ años, 5+ años">
            <div *ngIf="jobForm.get('experiencia_minima')?.invalid && jobForm.get('experiencia_minima')?.touched" class="error-message">
              La experiencia mínima es requerida
            </div>
          </div>

          <!-- Jornada laboral y Formación mínima -->
          <div>
            <label for="jornada_laboral" class="block text-sm font-medium text-gray-300 mb-2">
              Jornada Laboral *
            </label>
            <select id="jornada_laboral"
                    formControlName="jornada_laboral"
                    class="form-field-select">
              <option *ngFor="let jornada of jornadasLaborales" [value]="jornada">{{ jornada }}</option>
            </select>
            <div *ngIf="jobForm.get('jornada_laboral')?.invalid && jobForm.get('jornada_laboral')?.touched" class="error-message">
              La jornada laboral es requerida
            </div>
          </div>

          <div>
            <label for="formacion_minima" class="block text-sm font-medium text-gray-300 mb-2">
              Formación Mínima *
            </label>
            <select id="formacion_minima"
                    formControlName="formacion_minima"
                    class="form-field-select">
              <option *ngFor="let formacion of formacionesMinimas" [value]="formacion">{{ formacion }}</option>
            </select>
            <div *ngIf="jobForm.get('formacion_minima')?.invalid && jobForm.get('formacion_minima')?.touched" class="error-message">
              La formación mínima es requerida
            </div>
          </div>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="flex justify-end gap-4 mt-8">
        <button type="submit"
                [disabled]="isSubmitting"
                class="cursor-pointer   relative px-8 py-4 bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700 hover:from-indigo-700 hover:via-purple-700 hover:to-indigo-800 disabled:from-gray-600 disabled:via-gray-600 disabled:to-gray-600 text-white text-lg font-bold rounded-2xl transition-all duration-300 shadow-2xl hover:shadow-indigo-500/25 transform hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed border-2 border-indigo-400/50 hover:border-indigo-300 disabled:border-gray-500/50">
          <div class="flex items-center gap-3">
            <span *ngIf="!isSubmitting" class="text-2xl">✨</span>
            <span *ngIf="isSubmitting" class="text-2xl">⏳</span>
            <span *ngIf="isSubmitting">Creando...</span>
            <span *ngIf="!isSubmitting">Crear Oferta</span>
          </div>
          <div *ngIf="!isSubmitting" class="absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 hover:opacity-100 rounded-2xl transition-opacity duration-300"></div>
        </button>
      </div>
    </form>
  </div>
</div>
